<% if initiative.committee_members.any? %>
  <div class='card' id="committee_members">
    <div class="card-divider">
      <h2 class="card-title">
        <%= t(".title") %>
      </h2>
    </div>

    <div class="card-section">
      <div class="table-scroll">
        <table class="table-list">
          <tbody>
            <% initiative.committee_members.each do |request| %>
              <tr data-id="<%= request.id %>">
                <td>
                  <%= link_to request.user.name, "mailto:#{request.user.email}" %>
                </td>
                <td class="table-list__actions">
                  <% if can? :manage_membership, request %>
                    <%= icon_link_to "check",
                                     approve_committee_request_path(request),
                                     t(".approve"),
                                     class: "action-icon--check" unless request.accepted? %>
                    <%= icon_link_to "circle-x",
                                     revoke_committee_request_path(request),
                                     t(".revoke"),
                                     class: "action-icon--remove",
                                     method: :delete,
                                     data: { confirm: t(".confirm_revoke") } unless request.rejected? %>
                  <% end %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
<% else %>
  <%=t '.no_members_yet' %>
<% end %>
